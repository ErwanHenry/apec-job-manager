<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LinkedIn to CRM - Prospection System</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="container">
        <header>
            <h1>üöÄ LinkedIn to CRM System</h1>
            <div class="status-bar">
                <span class="status-item" id="google-status">
                    <span class="status-dot" id="google-dot"></span>
                    Google Sheets: <span id="google-text">Checking...</span>
                </span>
                <span class="status-item" id="linkedin-status">
                    <span class="status-dot" id="linkedin-dot"></span>
                    LinkedIn: <span id="linkedin-text">Checking...</span>
                </span>
                <button id="refreshHealth" class="btn-refresh">üîÑ Refresh</button>
            </div>
            <div id="status" class="status"></div>
        </header>

        <main>
            <!-- System Health Section -->
            <section class="card">
                <h2>üè• System Health</h2>
                <div id="systemHealth" class="health-status">
                    <div class="health-item">
                        <span class="health-dot yellow"></span>
                        Checking system status...
                    </div>
                </div>
                <div class="health-actions">
                    <button id="authenticateGoogle" class="btn-primary">üîë Authenticate Google</button>
                    <button id="clearCRM" class="btn-danger">üóëÔ∏è Clear CRM Data</button>
                    <button id="removeDuplicates" class="btn-warning">üîÑ Remove Duplicates</button>
                    <button id="exportData" class="btn-secondary">üì• Export CSV</button>
                </div>
            </section>

            <!-- LinkedIn Search Section -->
            <section class="card">
                <h2>üîç Search LinkedIn</h2>
                
                <!-- Scraping Method Selection -->
                <div class="scraping-methods">
                    <h3>üì° Choose Scraping Method</h3>
                    <div class="method-selector">
                        <label class="method-option recommended">
                            <input type="radio" name="scrapingMethod" value="apollo" checked>
                            <div class="method-card">
                                <div class="method-header">
                                    <span class="method-icon">üöÄ</span>
                                    <span class="method-name">Apollo.io API</span>
                                    <span class="method-badge free">FREE</span>
                                </div>
                                <div class="method-description">
                                    VRAIS profils LinkedIn v√©rifi√©s + emails<br>
                                    <small>275M+ profils, 10k cr√©dits/mois gratuit</small>
                                </div>
                            </div>
                        </label>
                        
                        <label class="method-option">
                            <input type="radio" name="scrapingMethod" value="selenium_dom">
                            <div class="method-card">
                                <div class="method-header">
                                    <span class="method-icon">ü§ñ</span>
                                    <span class="method-name">Google Selenium DOM</span>
                                    <span class="method-badge experimental">BETA</span>
                                </div>
                                <div class="method-description">
                                    Selenium avec vraies interactions DOM<br>
                                    <small>Clics automatiques, contournement d√©tection</small>
                                </div>
                            </div>
                        </label>
                        
                        <label class="method-option">
                            <input type="radio" name="scrapingMethod" value="mac_automation">
                            <div class="method-card">
                                <div class="method-header">
                                    <span class="method-icon">üñ±Ô∏è</span>
                                    <span class="method-name">Mac Keyboard Automation</span>
                                    <span class="method-badge mac">MAC ONLY</span>
                                </div>
                                <div class="method-description">
                                    AppleScript + Automator natif macOS<br>
                                    <small>Automation syst√®me niveau OS</small>
                                </div>
                            </div>
                        </label>
                        
                        <label class="method-option">
                            <input type="radio" name="scrapingMethod" value="hybrid_smart">
                            <div class="method-card">
                                <div class="method-header">
                                    <span class="method-icon">üß†</span>
                                    <span class="method-name">Hybrid Smart</span>
                                    <span class="method-badge fallback">FALLBACK</span>
                                </div>
                                <div class="method-description">
                                    Google + profils curat√©s intelligents<br>
                                    <small>Toujours des r√©sultats, 78 req/jour</small>
                                </div>
                            </div>
                        </label>
                    </div>
                </div>
                
                <form id="searchForm" class="search-form">
                    <div class="search-container">
                        <input type="text" 
                               id="searchQuery" 
                               placeholder="e.g. CTO startup Paris, Head of Sales SaaS, VP Marketing" 
                               required>
                        <input type="number" 
                               id="searchLimit" 
                               value="10" 
                               min="1" 
                               max="50" 
                               title="Number of results (1-50)">
                        <button type="submit" class="btn-search">
                            üîç Search
                        </button>
                    </div>
                    <p class="search-hint">
                        üí° Use specific job titles, companies, or locations for better results. 
                        Press <kbd>Ctrl+K</kbd> to focus search.
                    </p>
                </form>

                <!-- Search Results -->
                <div class="search-results">
                    <div class="results-header">
                        <h3>Search Results</h3>
                        <div class="results-stats">
                            <span id="selectedCount">0</span> selected
                        </div>
                    </div>
                    <div id="searchResults" class="results-container">
                        <div class="empty-state">
                            <p>No search results yet.</p>
                            <p>Enter a search query above to find LinkedIn profiles.</p>
                        </div>
                    </div>
                    <div class="results-actions">
                        <button id="selectAllBtn" class="btn-secondary" style="display: none;">
                            ‚úÖ Select All
                        </button>
                        <button id="deselectAllBtn" class="btn-secondary" style="display: none;">
                            ‚ùå Deselect All
                        </button>
                        <button id="addSelectedBtn" class="btn-primary" disabled>
                            Add Selected to CRM
                        </button>
                    </div>
                </div>
            </section>

            <!-- Live Logs Section -->
            <section class="card">
                <h2>üìã System Logs</h2>
                <div class="logs-header">
                    <div class="logs-controls">
                        <button id="refreshLogs" class="btn-secondary">üîÑ Refresh</button>
                        <button id="clearLogs" class="btn-danger">üóëÔ∏è Clear Logs</button>
                        <button id="toggleAutoRefresh" class="btn-primary">‚è∏Ô∏è Pause Auto-refresh</button>
                        <select id="logLevel" class="log-level-select">
                            <option value="">All Levels</option>
                            <option value="info">Info</option>
                            <option value="success">Success</option>
                            <option value="warn">Warning</option>
                            <option value="error">Error</option>
                            <option value="debug">Debug</option>
                        </select>
                    </div>
                    <div class="logs-stats">
                        <span id="logsCount">0 logs</span> | Auto-refresh: <span id="autoRefreshStatus">ON</span>
                    </div>
                </div>
                <div id="logsContainer" class="logs-container">
                    <div class="empty-state">
                        <p>Loading logs...</p>
                    </div>
                </div>
            </section>

            <!-- CRM Data Section -->
            <section class="card">
                <h2>üìä CRM Data</h2>
                <div class="crm-header">
                    <div class="crm-stats">
                        <div class="stat-item">
                            <span class="stat-number" id="totalCount">0</span>
                            <span class="stat-label">Total Prospects</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-number" id="selectedProspectsCount">0</span>
                            <span class="stat-label">Selected</span>
                        </div>
                    </div>
                    <div class="crm-actions">
                        <button id="refreshProspects" class="btn-refresh">üîÑ Refresh</button>
                        <button id="selectAllProspects" class="btn-secondary">‚úÖ Select All</button>
                        <button id="deselectAllProspects" class="btn-secondary">‚ùå Deselect All</button>
                    </div>
                </div>
                
                <!-- Sequence Controls -->
                <div class="sequence-controls">
                    <div class="sequence-header">
                        <h3>üöÄ Automation Sequence</h3>
                        <div class="sequence-status" id="sequenceStatus">
                            <span class="status-dot yellow"></span>
                            <span>Ready to configure</span>
                        </div>
                    </div>
                    
                    <div class="sequence-config">
                        <div class="config-row">
                            <div class="config-item">
                                <label>üìß Email Context:</label>
                                <textarea id="emailContext" rows="2" placeholder="Describe your company/service for AI email personalization...">We help companies accelerate their digital transformation with AI-powered solutions that reduce operational costs and improve efficiency.</textarea>
                            </div>
                        </div>
                        <div class="config-row">
                            <div class="config-item">
                                <label>üîó LinkedIn Message Template:</label>
                                <textarea id="linkedinTemplate" rows="2" placeholder="Hi {name}, I'd love to connect...">Hi {name}, I'd love to connect with you given your role as {title} at {company}. I believe we could have valuable discussions about industry trends.</textarea>
                            </div>
                        </div>
                        <div class="config-row">
                            <div class="config-options">
                                <label class="checkbox-label">
                                    <input type="checkbox" id="generateEmails" checked>
                                    üìß Generate AI-personalized emails
                                </label>
                                <label class="checkbox-label">
                                    <input type="checkbox" id="sendLinkedInConnections" checked>
                                    üîó Send LinkedIn connection requests
                                </label>
                                <label class="checkbox-label">
                                    <input type="checkbox" id="scheduleFollowups">
                                    ‚è∞ Schedule follow-up reminders
                                </label>
                            </div>
                        </div>
                    </div>
                    
                    <div class="sequence-validation" id="sequenceValidation">
                        <!-- Validation messages will appear here -->
                    </div>
                    
                    <div class="sequence-actions">
                        <button id="validateSequence" class="btn-secondary">üîç Check Configuration</button>
                        <button id="runFullSequence" class="btn-sequence" disabled>
                            üöÄ Run Full Sequence on Selected Prospects
                        </button>
                    </div>
                </div>
                
                <div id="prospectsTable" class="prospects-container">
                    <div class="empty-state">
                        <p>Loading prospects...</p>
                    </div>
                </div>
            </section>

            <!-- Automation Workflows Section -->
            <section class="card">
                <h2>ü§ñ Automation Workflows</h2>
                <div class="automation-config">
                    
                    <!-- Email Configuration -->
                    <div class="config-section">
                        <h3>üìß Email Configuration</h3>
                        <div class="config-grid">
                            <div class="config-item">
                                <label>Gmail Account:</label>
                                <input type="email" id="gmailUser" placeholder="your-email@gmail.com">
                            </div>
                            <div class="config-item">
                                <label>App Password:</label>
                                <input type="password" id="gmailPassword" placeholder="App-specific password">
                                <small>Generate at: Google Account ‚Üí Security ‚Üí App passwords</small>
                            </div>
                        </div>
                        <button id="testEmail" class="btn-secondary">üß™ Test Email Configuration</button>
                    </div>

                    <!-- Workflow Templates -->
                    <div class="config-section">
                        <h3>üéØ Workflow Templates</h3>
                        <div class="workflow-templates">
                            
                            <div class="workflow-card">
                                <h4>üîó LinkedIn Connection Sequence</h4>
                                <div class="workflow-steps">
                                    <div class="step">1. Send connection request</div>
                                    <div class="step">2. Wait 3 days if accepted</div>
                                    <div class="step">3. Send follow-up message</div>
                                    <div class="step">4. Schedule email if no response</div>
                                </div>
                                <div class="workflow-config">
                                    <label>Connection message template:</label>
                                    <textarea id="connectionTemplate" rows="3" placeholder="Hi {name}, I'd love to connect with you given your role as {title} at {company}.">Hi {name}, I'd love to connect with you given your role as {title} at {company}.</textarea>
                                </div>
                                <button class="btn-primary">üíæ Save Template</button>
                            </div>

                            <div class="workflow-card">
                                <h4>üìß Email Outreach Sequence</h4>
                                <div class="workflow-steps">
                                    <div class="step">1. Generate personalized email</div>
                                    <div class="step">2. Send initial outreach</div>
                                    <div class="step">3. Follow-up after 5 days</div>
                                    <div class="step">4. Final follow-up after 10 days</div>
                                </div>
                                <div class="workflow-config">
                                    <label>Email personalization context:</label>
                                    <textarea id="emailContext" rows="3" placeholder="We help HR professionals streamline recruitment processes...">We help HR professionals streamline recruitment processes with AI-powered tools that reduce time-to-hire by 40%.</textarea>
                                </div>
                                <button class="btn-primary">üíæ Save Template</button>
                            </div>

                            <div class="workflow-card">
                                <h4>‚ö° Hybrid Approach</h4>
                                <div class="workflow-steps">
                                    <div class="step">1. LinkedIn connection first</div>
                                    <div class="step">2. If no response, try email</div>
                                    <div class="step">3. Follow-up sequences on both channels</div>
                                    <div class="step">4. Mark as qualified when they respond</div>
                                </div>
                                <div class="workflow-config">
                                    <label>Wait time between attempts (days):</label>
                                    <input type="number" id="waitTime" value="3" min="1" max="30">
                                </div>
                                <button class="btn-primary">üíæ Save Template</button>
                            </div>

                        </div>
                    </div>

                    <!-- Automation Rules -->
                    <div class="config-section">
                        <h3>‚öôÔ∏è Automation Rules</h3>
                        <div class="rules-grid">
                            <div class="rule-item">
                                <label>
                                    <input type="checkbox" id="autoConnection" checked>
                                    Auto-send LinkedIn connections
                                </label>
                                <small>Automatically send connection requests to new prospects</small>
                            </div>
                            <div class="rule-item">
                                <label>
                                    <input type="checkbox" id="autoEmail" checked>
                                    Auto-generate personalized emails
                                </label>
                                <small>Use AI to create personalized email content</small>
                            </div>
                            <div class="rule-item">
                                <label>
                                    <input type="checkbox" id="autoFollowup">
                                    Auto-schedule follow-ups
                                </label>
                                <small>Automatically schedule follow-ups based on templates</small>
                            </div>
                            <div class="rule-item">
                                <label>
                                    <input type="checkbox" id="smartTiming" checked>
                                    Smart timing optimization
                                </label>
                                <small>Send messages at optimal times (9-11 AM, 2-4 PM)</small>
                            </div>
                        </div>
                    </div>

                    <!-- Analytics & Monitoring -->
                    <div class="config-section">
                        <h3>üìä Automation Analytics</h3>
                        <div class="analytics-grid">
                            <div class="metric-card">
                                <h4>üîó LinkedIn Activity</h4>
                                <div class="metric-value" id="linkedinConnections">0</div>
                                <div class="metric-label">Connections Sent Today</div>
                            </div>
                            <div class="metric-card">
                                <h4>üìß Email Activity</h4>
                                <div class="metric-value" id="emailsSent">0</div>
                                <div class="metric-label">Emails Sent Today</div>
                            </div>
                            <div class="metric-card">
                                <h4>‚è∞ Scheduled</h4>
                                <div class="metric-value" id="followupsScheduled">0</div>
                                <div class="metric-label">Follow-ups Pending</div>
                            </div>
                            <div class="metric-card">
                                <h4>üìà Response Rate</h4>
                                <div class="metric-value" id="responseRate">0%</div>
                                <div class="metric-label">This Week</div>
                            </div>
                        </div>
                    </div>

                </div>
            </section>

        </main>

        <!-- Footer -->
        <footer>
            <p>üí° Tips: Use specific search terms for better results. Configure email automation for 24/7 outreach.</p>
        </footer>
    </div>

    <script src="app.js"></script>
</body>
</html>